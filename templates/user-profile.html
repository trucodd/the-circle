<!DOCTYPE html>
<html>
<head>
    <title>User Profile - The Circle</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-bg': '#000000',
                        'dark-card': '#1c1c1e',
                        'dark-surface': '#2c2c2e',
                        'dark-border': '#3a3a3c'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .glass-effect {
            background: rgba(28, 28, 30, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .widget-card {
            background: #1c1c1e;
            border: 1px solid #3a3a3c;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
        }
    </style>
</head>

<body class="bg-dark-bg min-h-screen text-gray-100 font-sans">
    <!-- Header -->
    <header class="glass-effect sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-2xl bg-gray-700 flex items-center justify-center">
                        <img src="https://api.iconify.design/mdi:earth.svg?color=white" alt="Earth" class="w-6 h-6">
                    </div>
                    <span class="text-xl font-bold text-white">The Circle</span>
                </div>
                <button onclick="history.back()" 
                        class="px-4 py-2 rounded-xl border border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-300">
                    Back
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Profile Card -->
        <div class="widget-card rounded-3xl p-8 max-w-2xl mx-auto">
            <div class="text-center mb-8">
                <!-- Profile Picture -->
                <div id="userPic" class="w-24 h-24 rounded-3xl bg-gray-700 flex items-center justify-center text-3xl font-bold text-white mx-auto mb-4">
                    U
                </div>
                
                <!-- Username -->
                <h1 id="userName" class="text-3xl font-bold text-white mb-2">Username</h1>
                
                <!-- Bio -->
                <p id="userBio" class="text-gray-300 text-lg mb-6">No bio available</p>
                
                <!-- Message Button -->
                <button onclick="sendMessage()" 
                        class="px-8 py-3 rounded-xl bg-gray-700 text-white font-semibold hover:bg-gray-600 transition-all duration-300">
                    Send Message
                </button>
            </div>
        </div>
    </main>

    <script>
        // Get username from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const targetUsername = urlParams.get('user') || 'Unknown User';
        
        // Load user profile data
        function loadUserProfile() {
            document.getElementById('userName').textContent = targetUsername;
            document.getElementById('userPic').textContent = targetUsername.charAt(0).toUpperCase();
            
            // In a real app, you'd fetch this from a server
            // For now, show placeholder bio
            document.getElementById('userBio').textContent = `${targetUsername}'s bio will appear here`;
        }

        function sendMessage() {
            const currentUser = localStorage.getItem('userName') || 'User';
            const users = [currentUser, targetUsername].sort();
            const dmRoomId = `dm-${users[0]}-${users[1]}`;
            
            // Create DM room data
            const dmRoom = {
                id: dmRoomId,
                name: `Chat with ${targetUsername}`,
                description: 'Direct message',
                language: 'en',
                color: '#64ffda',
                emoji: 'ðŸ’¬',
                joinedAt: Date.now(),
                isOwner: false,
                isDM: true
            };
            
            // Add to joined rooms if not exists
            let joinedRooms = JSON.parse(localStorage.getItem('joinedRooms') || '[]');
            if (!joinedRooms.find(room => room.id === dmRoomId)) {
                joinedRooms.push(dmRoom);
                localStorage.setItem('joinedRooms', JSON.stringify(joinedRooms));
            }
            
            // Navigate to DM chat
            window.location.href = `/chat/${dmRoomId}?username=${currentUser}&language=en`;
        }

        // Initialize
        loadUserProfile();
    </script>
</body>
</html>