<!DOCTYPE html>
<html>
<head>
    <title>The Circle</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-bg': '#000000',
                        'dark-card': '#1c1c1e',
                        'dark-surface': '#2c2c2e',
                        'dark-border': '#3a3a3c'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .glass-effect {
            background: rgba(28, 28, 30, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .widget-card {
            background: #1c1c1e;
            border: 1px solid #3a3a3c;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
        }
    </style>
</head>
<body class="bg-dark-bg min-h-screen text-gray-100 font-sans">
    <!-- Header -->
    <header class="glass-effect sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-2xl bg-gray-700 flex items-center justify-center">
                        <img src="https://api.iconify.design/mdi:earth.svg?color=white" alt="Earth" class="w-6 h-6">
                    </div>
                    <span class="text-xl font-bold text-white">The Circle</span>
                </div>
                <div class="flex space-x-3">
                    <button onclick="showLogin()" class="px-4 py-2 rounded-xl border border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white transition-all duration-300">
                        Login
                    </button>
                    <button onclick="showRegister()" class="px-4 py-2 rounded-xl bg-gray-700 text-white hover:bg-gray-600 transition-all duration-300">
                        Sign Up
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Hero Section -->
        <div class="text-center mb-16">
            <div class="widget-card rounded-3xl p-12 mb-8">
                <h1 class="text-5xl md:text-6xl font-bold text-white mb-6">
                    Join a Circle
                </h1>
                <p class="text-xl text-gray-400 max-w-2xl mx-auto">
                    People from anywhere. Thoughts in every language. One circle.
                </p>
            </div>
        </div>

        <!-- Main Cards Grid -->
        <div class="grid lg:grid-cols-2 gap-8 mb-16">
            <!-- Quick Join Card -->
            <div class="widget-card rounded-3xl p-8">
                <div class="flex items-center space-x-3 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-gray-700 flex items-center justify-center">
                        <img src="https://api.iconify.design/mdi:lightning-bolt.svg?color=white" alt="Lightning" class="w-6 h-6">
                    </div>
                    <h2 class="text-2xl font-bold text-white">Quick Join</h2>
                </div>
                
                <div class="space-y-6">
                    <div>
                        <input type="text" id="username" placeholder="Your Name" required 
                               class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:border-accent-cyan focus:ring-2 focus:ring-accent-cyan/20 transition-all duration-300">
                    </div>
                    <div>
                        <select id="language" 
                                class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white focus:border-accent-cyan focus:ring-2 focus:ring-accent-cyan/20 transition-all duration-300">
                            <option value="en" class="bg-dark-card">English</option>
                            <option value="es" class="bg-dark-card">Spanish</option>
                            <option value="fr" class="bg-dark-card">French</option>
                            <option value="ja" class="bg-dark-card">Japanese</option>
                            <option value="hi" class="bg-dark-card">Hindi</option>
                        </select>
                    </div>
                    <div>
                        <input type="text" id="roomId" placeholder="Circle ID" required 
                               class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:border-accent-cyan focus:ring-2 focus:ring-accent-cyan/20 transition-all duration-300">
                    </div>
                    
                    <div class="space-y-3 pt-4">
                        <button onclick="joinCircle()" 
                                class="w-full py-3 rounded-xl bg-gray-700 text-white font-semibold hover:bg-gray-600 transition-all duration-300">
                            Join Circle
                        </button>
                        <button onclick="startCircle()" 
                                class="w-full py-3 rounded-xl bg-gray-600 text-white font-semibold hover:bg-gray-500 transition-all duration-300">
                            Start New Circle
                        </button>
                    </div>
                </div>
            </div>

            <!-- Features Card -->
            <div class="widget-card rounded-3xl p-8">
                <div class="flex items-center space-x-3 mb-8">
                    <div class="w-12 h-12 rounded-2xl bg-gray-700 flex items-center justify-center">
                        <img src="https://api.iconify.design/mdi:star-outline.svg?color=white" alt="Star" class="w-6 h-6">
                    </div>
                    <h2 class="text-2xl font-bold text-white">Why The Circle?</h2>
                </div>
                
                <div class="space-y-4">
                    <div class="flex items-center space-x-4 p-3 rounded-xl bg-gray-800/50 hover:bg-gray-700/50 transition-colors duration-300">
                        <div class="w-10 h-10 rounded-xl bg-gray-700 flex items-center justify-center">
                            <img src="https://api.iconify.design/mdi:chat.svg?color=white" alt="Chat" class="w-5 h-5">
                        </div>
                        <span class="text-gray-300">Instant text chat</span>
                    </div>
                    <div class="flex items-center space-x-4 p-3 rounded-xl bg-gray-800/50 hover:bg-gray-700/50 transition-colors duration-300">
                        <div class="w-10 h-10 rounded-xl bg-gray-700 flex items-center justify-center">
                            <img src="https://api.iconify.design/mdi:microphone.svg?color=white" alt="Microphone" class="w-5 h-5">
                        </div>
                        <span class="text-gray-300">Voice messaging</span>
                    </div>
                    <div class="flex items-center space-x-4 p-3 rounded-xl bg-gray-800/50 hover:bg-gray-700/50 transition-colors duration-300">
                        <div class="w-10 h-10 rounded-xl bg-gray-700 flex items-center justify-center">
                            <img src="https://api.iconify.design/mdi:lock.svg?color=white" alt="Lock" class="w-5 h-5">
                        </div>
                        <span class="text-gray-300">Secure & private conversations</span>
                    </div>
                    <div class="flex items-center space-x-4 p-3 rounded-xl bg-gray-800/50 hover:bg-gray-700/50 transition-colors duration-300">
                        <div class="w-10 h-10 rounded-xl bg-gray-700 flex items-center justify-center">
                            <img src="https://api.iconify.design/mdi:devices.svg?color=white" alt="Devices" class="w-5 h-5">
                        </div>
                        <span class="text-gray-300">Works on any device</span>
                    </div>
                    <div class="flex items-center space-x-4 p-3 rounded-xl bg-gray-800/50 hover:bg-gray-700/50 transition-colors duration-300">
                        <div class="w-10 h-10 rounded-xl bg-gray-700 flex items-center justify-center">
                            <img src="https://api.iconify.design/mdi:translate.svg?color=white" alt="Translate" class="w-5 h-5">
                        </div>
                        <span class="text-gray-300">Multi-language support</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="widget-card rounded-3xl p-8 w-full max-w-md">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-accent-cyan">Login</h2>
                    <button onclick="closeModal('loginModal')" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>
                
                <div class="space-y-6">
                    <input type="email" id="loginEmail" placeholder="Email" required 
                           class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:border-accent-cyan focus:ring-2 focus:ring-accent-cyan/20 transition-all duration-300">
                    <input type="password" id="loginPassword" placeholder="Password" required 
                           class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:border-accent-cyan focus:ring-2 focus:ring-accent-cyan/20 transition-all duration-300">
                    
                    <button onclick="login()" 
                            class="w-full py-3 rounded-xl bg-gradient-to-r from-accent-cyan to-blue-500 text-white font-semibold hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300">
                        Login
                    </button>
                    
                    <p class="text-center text-gray-400">
                        Don't have an account? 
                        <a href="#" onclick="showRegister(); closeModal('loginModal');" class="text-accent-cyan hover:underline">Sign up</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="widget-card rounded-3xl p-8 w-full max-w-md">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-accent-pink">Sign Up</h2>
                    <button onclick="closeModal('registerModal')" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>
                
                <div class="space-y-6">
                    <input type="text" id="registerName" placeholder="Full Name" required 
                           class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:border-accent-pink focus:ring-2 focus:ring-accent-pink/20 transition-all duration-300">
                    <input type="email" id="registerEmail" placeholder="Email" required 
                           class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:border-accent-pink focus:ring-2 focus:ring-accent-pink/20 transition-all duration-300">
                    <input type="password" id="registerPassword" placeholder="Password" required 
                           class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:border-accent-pink focus:ring-2 focus:ring-accent-pink/20 transition-all duration-300">
                    
                    <button onclick="register()" 
                            class="w-full py-3 rounded-xl bg-gradient-to-r from-accent-pink to-accent-purple text-white font-semibold hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300">
                        Sign Up
                    </button>
                    
                    <p class="text-center text-gray-400">
                        Already have an account? 
                        <a href="#" onclick="showLogin(); closeModal('registerModal');" class="text-accent-cyan hover:underline">Login</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showLogin() {
            document.getElementById('loginModal').classList.remove('hidden');
        }

        function showRegister() {
            document.getElementById('registerModal').classList.remove('hidden');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Please fill in all fields');
                return;
            }
            
            // Check if user exists in registered users
            const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
            const user = registeredUsers.find(u => u.email === email && u.password === password);
            
            if (!user) {
                alert('Invalid email or password');
                return;
            }
            
            // Store user session
            localStorage.setItem('userName', user.name);
            localStorage.setItem('userEmail', email);
            localStorage.setItem('isLoggedIn', 'true');
            
            closeModal('loginModal');
            window.location.href = '/dashboard';
        }

        function register() {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            if (!name || !email || !password) {
                alert('Please fill in all fields');
                return;
            }
            
            // Check if user already exists
            let registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');
            if (registeredUsers.find(u => u.email === email)) {
                alert('User with this email already exists');
                return;
            }
            
            // Add new user to registered users
            registeredUsers.push({ name, email, password });
            localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
            
            // Store user session
            localStorage.setItem('userName', name);
            localStorage.setItem('userEmail', email);
            localStorage.setItem('isLoggedIn', 'true');
            
            closeModal('registerModal');
            window.location.href = '/dashboard';
        }

        function startCircle() {
            if (localStorage.getItem('isLoggedIn') === 'true') {
                window.location.href = '/create-circle';
            } else {
                alert('Please login to create a circle. You can join existing circles without an account.');
            }
        }

        function joinCircle() {
            const username = document.getElementById('username').value;
            const language = document.getElementById('language').value;
            const roomId = document.getElementById('roomId').value;
            
            if (!username || !roomId) {
                alert('Please fill in all fields');
                return;
            }
            
            // Store room in user's joined rooms if logged in
            if (localStorage.getItem('isLoggedIn') === 'true') {
                let joinedRooms = JSON.parse(localStorage.getItem('joinedRooms') || '[]');
                const roomData = {
                    id: roomId,
                    name: `Circle ${roomId.split('-')[1]}`,
                    language: language,
                    joinedAt: new Date().toISOString(),
                    color: ['#ff6b9d', '#64ffda', '#c471ed', '#ff8a80', '#81c784'][Math.floor(Math.random() * 5)]
                };
                
                if (!joinedRooms.find(room => room.id === roomId)) {
                    joinedRooms.push(roomData);
                    localStorage.setItem('joinedRooms', JSON.stringify(joinedRooms));
                }
            }
            
            window.location.href = `/chat/${roomId}?username=${username}&language=${language}`;
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('fixed') && event.target.classList.contains('inset-0')) {
                event.target.classList.add('hidden');
            }
        }
    </script>
</body>
</html>